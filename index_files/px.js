(()=>{"use strict";const u="https://s.cpx.to",p=u+"/sync",l=12967,w=99,g=false,r="captify",d=999999,f="_cids",m="xexp",_="xid",x="tid",I="texp",h=2592e6,v=2592e6,S=1e3;function n(e,t){return`&dsp=${e}&dsp_uid=`+t}function b(e){return e?n("id5",e):""}function y(){return window.localStorage&&window.localStorage.getItem("_pubcid")?n("pub_common",window.localStorage.getItem("_pubcid")):window.pbjs&&window.pbjs.getUserIds&&window.pbjs.getUserIds().pubcid?n("pub_common",window.pbjs.getUserIds().pubcid):""}function k(){var e;return window.__uid2&&window.__uid2.getAdvertisingTokenAsync?(window.__uid2.getAdvertisingTokenAsync().then(e=>{e&&((new Image).src=p+"?"+n("uid2",e))}),""):window.__uid2&&window.__uid2.getAdvertisingToken?(e=window.__uid2.getAdvertisingToken())?n("uid2",e):void 0:""}function D(e){let t=e?n("app_nexus",e):"";return t=!t&&C()?n("app_nexus","0"):t}function T(e){return e?n("TTD",e):""}function O(e){return e?n("firstId",e):""}function a(e){e&&(e=JSON.parse(e),e=Array.from(e.new_categories,e=>e.id),window.localStorage)&&0<e.length&&(e.push(d),window.localStorage.setItem("_cptt",JSON.stringify({captify:e})),window.localStorage.setItem("_cptte",Date.now()+864e5),window.googletag)&&(e=e.map(e=>e.toString()),window.googletag.pubads().setTargeting(r,e))}function A(t,n=0){var e=window.googletag?(-1<(e=(i=window.googletag.pubads().getTargeting(r)).indexOf(d))&&i.splice(e,1),i):[],i=u+"/getClassification?",o="pid="+l+"&hn_ver="+w+(0===n?"":"&retry_number="+n)+(0===e.length?"":"&targeted_categories="+e)+b(t.id5)+y()+k()+T(t.ttd)+O(t.firstId)+D(t.xandr);return fetch(i+o,{method:"GET",credentials:"include",browsingTopics:!0}).then(e=>204===e.status&&n<1?new Promise(e=>setTimeout(e,2e3)).then(()=>A(t,n+1)):P(e).then(a))}function U(n,i){var e=document.referrer?"&ref="+encodeURIComponent(document.referrer):"",t=window.captify_kw_query_12967?"&kw="+encodeURIComponent(captify_kw_query_12967).substring(0,S):"",o=window.performance.timing?"&cdl="+(Date.now()-window.performance.timing.responseEnd):"";let r=encodeURIComponent(document.URL),d=u+"/fire.js?",a=n?"&gcv="+n:"",s="pid="+l+e+"&url="+r+"&hn_ver="+w+"&fid="+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})+o+t+b(i.id5)+y()+k()+T(i.ttd)+O(i.firstId),c=s+D(i.xandr)+a;e=function(e,t){for(const i of e){var n=document.querySelector(i);if(n&&n.hasAttribute(t)){n=n.getAttribute(t);if(""!==n.trim())return n}}return null}(['meta[name="description"]'],"content"),o={pageMeta:{title:document.title.substring(0,S)}};e&&(o.pageMeta.description=e.substring(0,S)),fetch(d+c,{method:"POST",credentials:"include",body:JSON.stringify(o),browsingTopics:!0}).then(e=>{var t=P(e).then(e=>{var i,o;e=e,i=n,o=s,C()||e.split(",").forEach(function(e){let t="";var n=i?"&gdpr=1&gdpr_consent="+i:"";switch(e.toLowerCase()){case"app_nexus":t="https://secure.adnxs.com/getuid?"+encodeURIComponent(u+"/fire.js?dsp=app_nexus&dsp_uid=$UID&"+o)+n;break;case"dbm":t="https://cm.g.doubleclick.net/pixel?google_nid=captify_dmp&google_cm&dsp=dbm"+n;break;case"pubmatic":t="https://image2.pubmatic.com/AdServer/UCookieSetPug?rd="+encodeURIComponent(p+"?dsp=pubmatic&dsp_uid=#PM_USER_ID")+n;break;case"openx":t="https://u.openx.net/w/1.0/cm?id=f0f39a70-2c21-4d5d-af4b-7350637edcd5"+n+"&r="+encodeURIComponent(p+"?dsp=OPENX&dsp_uid={OPENX_ID}");break;case"rubicon":t="https://pixel.rubiconproject.com/token?pid=34010&customParamenters"}t&&((new Image).src=t)})});return g&&null==e.headers.get("X-Discarded")?Promise.allSettled([A(i),t]):t})}function C(){return window.navigator&&window.navigator.userAgent&&-1!==window.navigator.userAgent.indexOf("Safari")&&-1===window.navigator.userAgent.indexOf("Chrome")&&-1===window.navigator.userAgent.indexOf("Firefox")}function E(e){return fetch(e,{credentials:"include"}).then(e=>P(e))}function P(e){return e.ok?e.text():Promise.reject({status:e.status,statusText:e.statusText})}function e(e){let t={xandr:null,ttd:null,id5:null,firstId:null},n=!0,i=!0;window.localStorage&&window.localStorage.getItem(f)&&((c=JSON.parse(window.localStorage.getItem(f)))[m]&&c[_]&&c[m]>Date.now()&&(t.xandr=c[_],n=!1),c[I])&&c[x]&&c[I]>Date.now()&&(t.ttd=c[x],i=!1);var o,r,d,a,s,c=[],u=(n&&c.push((r=e,o=t,E("https://ib.adnxs.com/getuidj"+(r?"?gdpr=1&gdpr_consent="+r:"")).then(e=>{e=JSON.parse(e).uid;o.xandr="0"===e?null:e}).catch(()=>null))),i&&c.push((r=e,d=t,E("https://match.adsrvr.org/track/rid?ttd_pid=0fkciot&fmt=json"+(r?"&gdpr=1&gdpr_consent="+r:"")).then(e=>{e=JSON.parse(e).TDID;d.ttd=e||null}).catch(()=>null))),localStorage.getItem("captify-id5id-fast-track"));if(""!==u&&null!==u)t.id5=u;else try{u=JSON.parse(decodeURIComponent(window.localStorage.getItem("id5id"))).universal_uid,localStorage.setItem("captify-id5id-fast-track",u),t.id5=u}catch(e){}return window.ID5&&(a=t,new Promise((t,e)=>{ID5.init({partnerId:1539}).onAvailable(e=>{e=e.getUserId();e&&(a.id5=e,localStorage.setItem("captify-id5id-fast-track",e),t())})}).catch(e=>{})),window.firstId&&c.push((s=t,u=new RegExp("(?:^|.*; *)firstid *= *([^;]*).*$|^.*$","i"),(u=document.cookie.match(u)[1])?(s.firstId=decodeURIComponent(u),Promise.resolve()):new Promise((e,t)=>{setTimeout(()=>t(new Error("Timed out")),300),window.firstId.callbacks.push(()=>{s.firstId=(new FirstIdSdk).getId(),e()})}))),Promise.allSettled(c).then(()=>{var e;window.localStorage&&(n||i)&&(e=(e=window.localStorage.getItem(f))?JSON.parse(e):{},n&&t.xandr&&(e[_]=t.xandr,e[m]=Date.now()+h),i&&t.ttd&&(e[x]=t.ttd,e[I]=Date.now()+v),window.localStorage.setItem(f,JSON.stringify(e)))}).finally(()=>{U(e,t)})}function i(n){__gpp("addEventListener",(e,t)=>{t&&e.pingData&&"ready"===e.pingData.signalStatus&&(n(e.pingData.gppString),__gpp("removeEventListener",e=>{},e.listenerId))})}function t(e){var n;window.__tcfapi?(n=e,window.__tcfapi("addEventListener",2,(e,t)=>{t&&(e.gdprApplies?"useractioncomplete"!==e.eventStatus&&"tcloaded"!==e.eventStatus||(n(e.tcString),window.__tcfapi("removeEventListener",2,e=>{},e.listenerId)):(window.__gpp?i(n):n(""),window.__tcfapi("removeEventListener",2,e=>{},e.listenerId)))})):window.__gpp?i(e):e("")}function o(){let e=window,o;const r={};for(;e;){try{if(e.frames.__tcfapiLocator){o=e;break}}catch(e){}if(e===window.top)break;e=e.parent}window.__tcfapi=function(e,t,n,i){o?(i={__tcfapiCall:{command:e,parameter:i,version:t,callId:e=Math.random()+""}},r[e]=n,o.postMessage(i,"*")):n({msg:"CMP not found"},!1)},window.addEventListener("message",function(e){let t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}(e=t.__tcfapiReturn)&&"function"==typeof r[e.callId]&&(r[e.callId](e.returnValue,e.success),r[e.callId]=null)},!1)}window.self!==window.top&&o(),t(e)})();